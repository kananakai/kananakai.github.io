---
layout: post
title: kanazawa-jaws-UG_10
date: 2016-05-12
tags: japanise
category: aws
---

# JAWS-UG金沢 第10回勉強会

- 午後半休とって、JAWS-UG金沢に参加してきましたー。  
懇親会が終わったのが日付変更間際。。。かつ、翌日富山で仕事。。。  
睡魔と激戦を繰り日遂げることとなろうとはこの時は知る由もなかった。。。  
というわけで内容のまとめです。  

- 19:10-19:50  
  AWSトラブルシューティング！早期復旧のための心掛け JAWS-UG 上越妙高 植木さん（クラスメソッド株式会社）  
  
 - 運用保守とは  
   - 運用　⇨　正常に稼動している  
   - 保守　⇨　本来あるべき姿になるようにする。  

 - 監視のポイント  
   - 障害を捉えた後のアクションを明確にするのが重要です。  
   - リソースではなくサービスを監視しましょう。（CPUが100％でも異常ではない）  
   - リソースではなく処理状況を監視しましょう。  
   - 重要な障害通知が【重要】であることがわかるようにする。  
   
 - 誤解  
   - AWSは信頼性が高い　⇨　信頼性が高いシステムが作りやすい  
   - AWSサポートへの問い合わせのコツ    
     - いつ　⇨　日時、今も継続中  
     - どこで、なにが、だれが　⇨　AWSアカウント、リソースID、リーション、IAMユーザー  
     - どうなった　⇨　ログ、画面キャプチャ、ping/traceroute、具体的に  
     - ビジネス影響は？　⇨　緊急度（優先度）  

 - 障害が起きてから考えていたら遅い  
  - 日々の地道な下準備が重要です。  
  
     - システム構成図  
     - ELB、CloudFrontのログ  
     - CloudTrail(Githubとかでアクセスキーを公開するとすぐに使われるので注意)    
     - MySQL show full processlist  
  
 - リリース前に必要な負荷試験  
   - 見込みの３倍〜１０倍の負荷をかけるとよい  
   - どこがボトムネックになるのか？（限界試験）  
   - トップページ、ランディング  
   - ディスク資料量（負荷試験後に確認しましょう。）  
  
 - 障害試験
   - サーバを止める、サービスは止まらないことを確認（冗長化されている）
   - DBフェイルオーバー
   - 障害が検知できること
   - メール文面をチェック（内容がちゃんとわかるように）
   - メールのチケット化し、OTRS、Chatwark、twilioで通知
  
  
- 20:00-20:15  
  俺と「AWS外部から観測」	JAWS-UG 金沢 加藤さん（PhalanXware）  
  
 - 運用における観測のモチベーション  
   - 通常の状態を維持したい  
    - 提供者観点だと、提供したいものが提供できていて、提供したくないものが提供されてない状態、お客さん観点だと、通常にサービスを利用できている状態  
   - 発生したら事前に防ぐコストよりもこうコストとなる  
    - お客さまがあらゆる手段で連絡してくる  
    - サービスが止まると信頼が毀損する  
    - 信頼は取り戻すのが大変  
    
 - 異常な状態となる原因  
   - 設定ミス  
   - 高アクセス  
   - セキュリティ  
   - ハードウェア障害(オンプレ側)  
   
 - 監視方法  
   - 内部から観測(監視)  
     - 一般的によくやる方法  
     - ただ、サービスを受ける側から見たものと違う可能性がある。  

   - 外部から観測
     - お客さまみたサービス移譲
     - お客さまにできるだけ近いかたちで観測
    

- 20:20-20:35  
  センターSEがインスタンスので止め忘れを監視してみた JAWS-UG 富山 石崎さん（日本オープンシステムズ）  
  
 - 石崎すまん。割愛しちゃいます。
  
- 20:40-20:55  
  Zabbix 監視と課題 （仮）JAWS-UG 金沢＆富山 松本さん
  
 - Zabbix活用のねらい
   - 障害対応が後手にまわらないように
   - お客さまが気付く前に気がつかないと主導権を握られてしまう。（いつ復旧するのとかなんとか）
   - 監視台数増に耐えられし、統一的なインターフェースでわかりやすい？
 - 構成
   - オンプレに1台(SOPF)  ※そんなもんでいいんだー
   - ラックマウントはNICポートが少ないのが失敗点
   - アイテム数 30,000、トリガー数 4,000　※すごすぎ。。。
 - 対象
   - ネットワーク機器（ルーター、スイッチ）※SNMP対応機器
   - 無線LANアクセスポイント
   - プリンタ・スキャナー
   - サーバー
   - AWS
   - データベース
   - 独自スクリプトの結果
   - フォルダ監視



   
